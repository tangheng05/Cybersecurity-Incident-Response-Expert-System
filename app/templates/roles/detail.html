{% extends "layouts/base.html" %} {% block title %}{{ role.display_name }}
Role{% endblock %} {% block content %}

<!-- Page Header with Enhanced Design -->
<div class="mb-5">
  <div class="d-flex align-items-center mb-3">
    <div
      class="d-flex align-items-center justify-content-center me-3"
      style="
        width: 60px;
        height: 60px;
        border-radius: 12px;
        background: linear-gradient(
          135deg,
          rgba(13, 110, 253, 0.1),
          rgba(13, 110, 253, 0.05)
        );
        border: 2px solid rgba(13, 110, 253, 0.2);
      "
    >
      <i
        class="fas fa-shield-alt"
        style="font-size: 1.8rem; color: #0d6efd"
      ></i>
    </div>
    <div>
      <h1 class="h2 mb-2" style="font-weight: 700; color: var(--text-primary)">
        {{ role.display_name }}
        <span
          class="badge bg-{{ role.badge_color }} ms-2"
          style="font-size: 0.65rem; vertical-align: middle"
        >
          {{ role.name|upper }}
        </span>
      </h1>
      <p class="mb-0" style="color: var(--text-secondary); font-size: 1rem">
        {{ role.description }}
      </p>
    </div>
  </div>
</div>

<div class="row g-4">
  <!-- Permissions Card with Enhanced Design -->
  <div class="col-lg-5 mb-4">
    <div
      class="card h-100"
      style="border-radius: 12px; border: 1px solid var(--card-border)"
    >
      <div
        class="card-header"
        style="
          background: linear-gradient(
            135deg,
            rgba(25, 135, 84, 0.08),
            rgba(25, 135, 84, 0.03)
          );
          border-bottom: 2px solid rgba(25, 135, 84, 0.2);
          padding: 1.25rem;
          border-radius: 12px 12px 0 0;
        "
      >
        <h5 class="mb-0" style="font-weight: 600; color: var(--text-primary)">
          <i class="fas fa-key me-2" style="color: #198754"></i>
          Permissions
          <span class="badge bg-success ms-2" style="font-size: 0.75rem"
            >{{ role.permissions|length }}</span
          >
        </h5>
      </div>
      <div class="card-body" style="padding: 1.5rem">
        <ul class="list-unstyled mb-0">
          {% for permission in role.permissions %}
          <li
            style="
              padding: 14px 16px;
              margin-bottom: 10px;
              background: rgba(25, 135, 84, 0.05);
              border-radius: 8px;
              border-left: 3px solid #198754;
              transition: all 0.2s ease;
            "
            onmouseover="this.style.background='rgba(25, 135, 84, 0.1)'; this.style.transform='translateX(4px)';"
            onmouseout="this.style.background='rgba(25, 135, 84, 0.05)'; this.style.transform='translateX(0)';"
          >
            <i
              class="fas fa-check-circle me-3"
              style="color: #198754; font-size: 1.1rem"
            ></i>
            <span style="color: var(--text-primary); font-weight: 500"
              >{{ permission }}</span
            >
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>

  <!-- Users Card with Enhanced Design -->
  <div class="col-lg-7 mb-4">
    <div
      class="card h-100"
      style="border-radius: 12px; border: 1px solid var(--card-border)"
    >
      <div
        class="card-header"
        style="
          background: linear-gradient(
            135deg,
            rgba(13, 110, 253, 0.08),
            rgba(13, 110, 253, 0.03)
          );
          border-bottom: 2px solid rgba(13, 110, 253, 0.2);
          padding: 1.25rem;
          border-radius: 12px 12px 0 0;
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        <h5 class="mb-0" style="font-weight: 600; color: var(--text-primary)">
          <i class="fas fa-users me-2" style="color: #0d6efd"></i>
          Users
          <span class="badge bg-primary ms-2" style="font-size: 0.75rem"
            >{{ role.user_count }}</span
          >
        </h5>
        <a
          href="{{ url_for('users.create') }}"
          class="btn btn-primary btn-sm"
          style="border-radius: 8px; padding: 0.4rem 1rem; font-weight: 500"
        >
          <i class="fas fa-user-plus me-2"></i>Add User
        </a>
      </div>
      <div class="card-body" style="padding: 1.5rem">
        {% if role.users %}
        <div class="table-responsive">
          <table
            class="table table-hover mb-0"
            style="border-radius: 8px; overflow: hidden"
          >
            <thead style="background: rgba(13, 110, 253, 0.08)">
              <tr>
                <th
                  style="
                    border: none;
                    padding: 12px 16px;
                    font-weight: 600;
                    font-size: 0.85rem;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                  "
                >
                  Username
                </th>
                <th
                  style="
                    border: none;
                    padding: 12px 16px;
                    font-weight: 600;
                    font-size: 0.85rem;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                  "
                >
                  Full Name
                </th>
                <th
                  style="
                    border: none;
                    padding: 12px 16px;
                    font-weight: 600;
                    font-size: 0.85rem;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                  "
                >
                  Email
                </th>
                <th
                  style="
                    border: none;
                    padding: 12px 16px;
                    font-weight: 600;
                    font-size: 0.85rem;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                  "
                >
                  Status
                </th>
                <th
                  style="
                    border: none;
                    padding: 12px 16px;
                    font-weight: 600;
                    font-size: 0.85rem;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                    text-align: center;
                  "
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody>
              {% for user in role.users %}
              <tr style="border-bottom: 1px solid var(--card-border)">
                <td style="padding: 14px 16px; vertical-align: middle">
                  <i
                    class="fas fa-user me-2"
                    style="color: var(--text-secondary); font-size: 0.9rem"
                  ></i>
                  <span style="font-weight: 500; color: var(--text-primary)"
                    >{{ user.username }}</span
                  >
                </td>
                <td
                  style="
                    padding: 14px 16px;
                    color: var(--text-primary);
                    vertical-align: middle;
                  "
                >
                  {{ user.full_name }}
                </td>
                <td style="padding: 14px 16px; vertical-align: middle">
                  <code
                    style="
                      background: rgba(13, 110, 253, 0.1);
                      padding: 4px 8px;
                      border-radius: 4px;
                      font-size: 0.85rem;
                      color: #0d6efd;
                    "
                    >{{ user.email }}</code
                  >
                </td>
                <td style="padding: 14px 16px; vertical-align: middle">
                  {% if user.is_active %}
                  <span
                    class="badge bg-success"
                    style="
                      padding: 6px 12px;
                      border-radius: 6px;
                      font-weight: 500;
                    "
                    >Active</span
                  >
                  {% else %}
                  <span
                    class="badge bg-secondary"
                    style="
                      padding: 6px 12px;
                      border-radius: 6px;
                      font-weight: 500;
                    "
                    >Inactive</span
                  >
                  {% endif %}
                </td>
                <td
                  style="
                    padding: 14px 16px;
                    text-align: center;
                    vertical-align: middle;
                  "
                >
                  <div class="btn-group" role="group">
                    <a
                      href="{{ url_for('users.detail', user_id=user.id) }}"
                      class="btn btn-sm btn-outline-primary"
                      style="
                        border-radius: 6px 0 0 6px;
                        padding: 0.35rem 0.75rem;
                      "
                      title="View Details"
                    >
                      <i class="fas fa-eye"></i>
                    </a>
                    <a
                      href="{{ url_for('users.edit', user_id=user.id) }}"
                      class="btn btn-sm btn-outline-warning"
                      style="
                        border-radius: 0 6px 6px 0;
                        padding: 0.35rem 0.75rem;
                      "
                      title="Edit User"
                    >
                      <i class="fas fa-edit"></i>
                    </a>
                  </div>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
        <div style="text-align: center; padding: 60px 20px">
          <div
            style="
              width: 80px;
              height: 80px;
              margin: 0 auto 20px;
              border-radius: 50%;
              background: linear-gradient(
                135deg,
                rgba(108, 117, 125, 0.1),
                rgba(108, 117, 125, 0.05)
              );
              display: flex;
              align-items: center;
              justify-content: center;
            "
          >
            <i
              class="fas fa-users"
              style="font-size: 2.5rem; color: var(--text-muted); opacity: 0.4"
            ></i>
          </div>
          <h5
            style="
              color: var(--text-primary);
              font-weight: 600;
              margin-bottom: 8px;
            "
          >
            No Users Yet
          </h5>
          <p
            style="
              color: var(--text-muted);
              font-size: 0.95rem;
              margin-bottom: 24px;
            "
          >
            No users have been assigned to this role. Create your first user to
            get started.
          </p>
          <a
            href="{{ url_for('users.create') }}"
            class="btn btn-primary"
            style="border-radius: 8px; padding: 0.6rem 1.5rem; font-weight: 500"
          >
            <i class="fas fa-user-plus me-2"></i>Create First User
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Back Button with Enhanced Design -->
<div class="mt-4 mb-4">
  <a
    href="{{ url_for('roles.index') }}"
    class="btn btn-outline-primary"
    style="border-radius: 8px; padding: 0.6rem 1.5rem; font-weight: 500"
  >
    <i class="fas fa-arrow-left me-2"></i>Back to Roles
  </a>
</div>

{% endblock %}
